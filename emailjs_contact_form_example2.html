
<!DOCTYPE html>
<html>
<head>
    <title>Contact Form</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@2.4.1/dist/email.min.js"></script>
    <script type="text/javascript">
        (function(){
           emailjs.init('user_hrnA2do1d3XjSPniHALKi');
        })();
    </script>
    <script type="text/javascript">
        window.onload = function() {
            document.getElementById('contact_form').addEventListener('submit', function(event) {
                event.preventDefault();
                submitButton();

                // generate the contact number value
                // contact_number.value = Math.random() * 100000 | 0;
                emailjs.sendForm('gmail', 'contact_form', this);
            });
        }
    </script>
    <script>
        function submitButton(){
            let a = document.getElementById("user_name").value;
            let b = document.getElementById("user_email").value;
            let c = document.getElementById("message").value;
            fillHiddenFormular(a, b, c);
            // window.alert(subject + " " + content + " " + email);
        }
        function fillHiddenFormular(a, b, c){
            document.getElementById("hidden_contact_number").value = Math.random() * 100000 | 0;
            document.getElementById("hidden_user_name").value = a;
            document.getElementById("hidden_user_email").value = b;
            document.getElementById("hidden_message").value = c;
            document.getElementById("hidden_data").value = 
            makeJsonString(a,b,c);
        }
        function makeJsonString(a,b,c){
            return ""+
            "{\n"+
            " data:[\n"+
            "  {\n"+
            "   user_name:\""+a+"\",\n"+
            "   user_mail:\""+b+"\",\n"+
            "   message:\""+c+"\"\n"+
            "  }\n"+
            " ]\n"+
            "}";
        }
    </script>
</head>
<body>

    <form id="contact_form">
        <label>Name</label>
        <input type="text" id="user_name">
        <label>Email</label>
        <input type="email" id="user_email">
        <label>Message</label>
        <textarea id="message"></textarea>
        <!-- <button id="submit" onclick="submitButton()">Submit</button> -->

        <input type="text" name="contact_number" id="hidden_contact_number">
        <input type="text" name="user_name" id="hidden_user_name">
        <input type="text" name="user_email" id="hidden_user_email">
        <input type="text" name="message" id="hidden_message">
        <input type="text" name="data" id="hidden_data">
        
        <input type="submit" value="Send">
    </form>

</body>
</html>


